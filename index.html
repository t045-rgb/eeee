<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë°©íƒˆì¶œ ë…¼ë¦¬ í¼ì¦ ê²Œì„</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #0d1117;
            color: #c9d1d9;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            text-align: center;
        }
        .container {
            width: 90%;
            max-width: 600px;
            background-color: #161b22;
            padding: 2.5rem;
            border-radius: 1.5rem;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            border: 1px solid #30363d;
            position: relative; /* for hint confirmation box */
        }
        .start-screen, .game-screen, .end-screen {
            display: none;
            flex-direction: column;
            gap: 1.5rem;
        }
        .start-screen.active, .game-screen.active, .end-screen.active {
            display: flex;
        }
        h1 {
            font-size: 2.5rem;
            font-weight: 700;
            color: #58a6ff;
        }
        p {
            font-size: 1rem;
            line-height: 1.6;
        }
        .game-status {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: 1rem;
            padding: 0.75rem 1.5rem;
            background-color: #21262d;
            border-radius: 1rem;
            border: 1px solid #30363d;
        }
        .clue-box {
            background-color: #21262d;
            border: 1px solid #30363d;
            padding: 1.5rem;
            border-radius: 1rem;
            margin-bottom: 1rem;
        }
        .input-group {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }
        .input-group input {
            background-color: #0d1117;
            border: 1px solid #30363d;
            padding: 0.75rem;
            border-radius: 0.75rem;
            color: #c9d1d9;
            outline: none;
            transition: border-color 0.3s;
        }
        .input-group input:focus {
            border-color: #58a6ff;
        }
        .button {
            background-color: #238636;
            color: #fff;
            padding: 0.75rem 1.5rem;
            border-radius: 0.75rem;
            cursor: pointer;
            transition: background-color 0.3s, transform 0.1s;
            border: none;
            font-size: 1rem;
            font-weight: 600;
        }
        .button:hover {
            background-color: #2ea043;
        }
        .button:active {
            transform: scale(0.98);
        }
        .message-box {
            background-color: #21262d;
            border: 1px solid #30363d;
            padding: 1rem;
            border-radius: 0.75rem;
            color: #c9d1d9;
            text-align: left;
            margin-top: 1rem;
        }
        .message-box.success {
            border-color: #238636;
            color: #3fb950;
        }
        .message-box.error {
            border-color: #d1212c;
            color: #f85149;
        }
        .hint-button {
            background-color: #8957e5;
            margin-top: 0.5rem;
        }
        .hint-button:hover {
            background-color: #9263e8;
        }
        .confirm-box {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: #21262d;
            padding: 1.5rem;
            border-radius: 1rem;
            border: 1px solid #30363d;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.7);
            z-index: 10;
            display: none;
            flex-direction: column;
            gap: 1rem;
        }
        .confirm-box.active {
            display: flex;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Start Screen -->
        <div id="start-screen" class="start-screen active">
            <h1>ë°©íƒˆì¶œ ë…¼ë¦¬ í¼ì¦ ê²Œì„</h1>
            <p>ë‹¹ì‹ ì€ ì–´ë‘ìš´ ë°©ì— ê°‡í˜”ìŠµë‹ˆë‹¤.<br>ì´ ë°©ì€ ë…¼ë¦¬ í¼ì¦ë¡œ ê°€ë“ ì°¨ ìˆìŠµë‹ˆë‹¤.<br>ê° í¼ì¦ì„ í’€ê³  ë‹¨ì„œë¥¼ ëª¨ì•„ ìµœì¢… ì½”ë“œë¥¼ ì°¾ì•„ë‚´ì•¼ë§Œ íƒˆì¶œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
            <p>10ê°œì˜ í•˜íŠ¸ê°€ ìˆìœ¼ë©°, í‹€ë¦´ ë•Œë§ˆë‹¤ í•˜ë‚˜ì”© ì‚¬ë¼ì§‘ë‹ˆë‹¤.<br>í•˜íŠ¸ë¥¼ ëª¨ë‘ ìƒìœ¼ë©´ ê²Œì„ ì˜¤ë²„ê°€ ë©ë‹ˆë‹¤.<br>íƒ€ì´ë¨¸ëŠ” ê²Œì„ ì‹œì‘ë¶€í„° íƒˆì¶œê¹Œì§€ ê±¸ë¦° ì‹œê°„ì„ ì¸¡ì •í•©ë‹ˆë‹¤.</p>
            <button id="start-button" class="button">ê²Œì„ ì‹œì‘</button>
        </div>

        <!-- Game Screen -->
        <div id="game-screen" class="game-screen">
            <div class="game-status">
                <div id="timer-display" class="text-white"></div>
                <div id="hearts-display" class="text-red-500"></div>
            </div>
            <h2 id="puzzle-title" class="text-xl font-bold mb-4"></h2>
            <div id="puzzle-clue" class="clue-box text-left"></div>
            <div class="input-group">
                <input type="text" id="user-input" placeholder="ì •ë‹µì„ ì…ë ¥í•˜ì„¸ìš”">
                <button id="check-button" class="button">í™•ì¸</button>
                <button id="hint-button" class="button hint-button">íŒíŠ¸ ë³´ê¸° (í•˜íŠ¸ 3ê°œ)</button>
            </div>
            <div id="message-area" class="message-box"></div>
        </div>

        <!-- End Screen -->
        <div id="end-screen" class="end-screen">
            <h1 id="end-title"></h1>
            <p id="end-message" class="text-xl"></p>
            <button id="restart-button" class="button">ë‹¤ì‹œ ì‹œì‘</button>
        </div>
        
        <!-- Hint Confirmation Box -->
        <div id="confirm-box" class="confirm-box">
            <p>íŒíŠ¸ë¥¼ ì‚¬ìš©í•˜ì‹œê² ìŠµë‹ˆê¹Œ? (í•˜íŠ¸ 3ê°œ ì°¨ê°)</p>
            <div class="flex justify-between gap-4">
                <button id="confirm-yes" class="button">í™•ì¸</button>
                <button id="confirm-no" class="button">ì·¨ì†Œ</button>
            </div>
        </div>
    </div>

    <script>
        const startScreen = document.getElementById('start-screen');
        const gameScreen = document.getElementById('game-screen');
        const endScreen = document.getElementById('end-screen');
        const startButton = document.getElementById('start-button');
        const checkButton = document.getElementById('check-button');
        const restartButton = document.getElementById('restart-button');
        const hintButton = document.getElementById('hint-button');
        const confirmBox = document.getElementById('confirm-box');
        const confirmYes = document.getElementById('confirm-yes');
        const confirmNo = document.getElementById('confirm-no');
        const puzzleTitle = document.getElementById('puzzle-title');
        const puzzleClue = document.getElementById('puzzle-clue');
        const userInput = document.getElementById('user-input');
        const messageArea = document.getElementById('message-area');
        const timerDisplay = document.getElementById('timer-display');
        const heartsDisplay = document.getElementById('hearts-display');
        const endTitle = document.getElementById('end-title');
        const endMessage = document.getElementById('end-message');

        const HINT_COST = 3;
        const HINT_DISPLAY_TIME = 5000; // 5ì´ˆë¡œ ìˆ˜ì •

        let currentPuzzleIndex = 0;
        let hearts = 10;
        let timeElapsed = 0;
        let timerInterval;

        // í¼ì¦ ë°ì´í„°
        const puzzles = [
            {
                title: 'ì²« ë²ˆì§¸ í¼ì¦: ì„¸ ê°œì˜ ìƒì',
                clue: `
                    ë‚˜ëŠ” ì„¸ ê°œì˜ ìƒìë¥¼ ë°œê²¬í–ˆìŠµë‹ˆë‹¤. <b>íŒŒë€ ìƒì</b>, <b>ë¹¨ê°„ ìƒì</b>, <b>ë…¹ìƒ‰ ìƒì</b>.
                    <br>
                    íŒŒë€ ìƒìì—ëŠ” "ì§„ì‹¤ì€ ë…¹ìƒ‰ ìƒì ì•ˆì— ìˆë‹¤"ë¼ê³  ì“°ì—¬ ìˆìŠµë‹ˆë‹¤.
                    <br>
                    ë¹¨ê°„ ìƒìì—ëŠ” "ì§„ì‹¤ì€ ì´ ìƒì ì•ˆì— ìˆì§€ ì•Šë‹¤"ë¼ê³  ì“°ì—¬ ìˆìŠµë‹ˆë‹¤.
                    <br>
                    ë…¹ìƒ‰ ìƒìì—ëŠ” "ì§„ì‹¤ì€ ì´ ìƒì ì•ˆì— ìˆì§€ ì•Šë‹¤"ë¼ê³  ì“°ì—¬ ìˆìŠµë‹ˆë‹¤.
                    <br>
                    <br>
                    ì„¸ ê°œì˜ ë¬¸ì¥ ì¤‘ <b>ì˜¤ì§ í•˜ë‚˜ë§Œ</b>ì´ ì°¸ì…ë‹ˆë‹¤. ì§„ì‹¤ì€ ì–´ë–¤ ìƒì ì•ˆì— ìˆìŠµë‹ˆê¹Œ?
                `,
                answer: 'ë¹¨ê°„ ìƒì',
                hint: 'ì„¸ ê°œì˜ ë¬¸ì¥ ì¤‘ í•˜ë‚˜ë§Œ ì°¸ì´ë¼ëŠ” ì¡°ê±´ì— ì§‘ì¤‘í•˜ì„¸ìš”. ë¬¸ì¥ë“¤ì´ ì„œë¡œ ì–´ë–»ê²Œ ëª¨ìˆœë˜ëŠ”ì§€ ìƒê°í•´ë³´ì„¸ìš”.'
            },
            {
                title: 'ë‘ ë²ˆì§¸ í¼ì¦: ê±°ìš¸ ì† ì‹œê³„',
                clue: `
                    ë‚˜ëŠ” ë²½ì— ê±¸ë¦° ì‹œê³„ë¥¼ ë³´ì•˜ìŠµë‹ˆë‹¤. ì‹œê³„ëŠ” <b>ê±°ìš¸</b>ì— ë¹„ì¶°ì ¸ ìˆìŠµë‹ˆë‹¤.
                    <br>
                    ê±°ìš¸ ì† ì‹œê³„ëŠ” 3ì‹œ 40ë¶„ì„ ê°€ë¦¬í‚¤ê³  ìˆìŠµë‹ˆë‹¤.
                    <br>
                    <br>
                    <b>ì‹¤ì œ ì‹œê°„</b>ì€ ëª‡ ì‹œ ëª‡ ë¶„ì…ë‹ˆê¹Œ?
                    <br>
                    <br>
                    ë‹µë³€ í˜•ì‹: <b>'ì‹œ:ë¶„'</b>
                `,
                answer: '8:20',
                hint: 'ê±°ìš¸ ì† ì‹œê°„ì€ 12ì‹œë¥¼ ê¸°ì¤€ìœ¼ë¡œ ì‹¤ì œ ì‹œê°„ê³¼ ëŒ€ì¹­ì…ë‹ˆë‹¤.'
            },
            {
                title: 'ì„¸ ë²ˆì§¸ í¼ì¦: ìˆ˜í•™ ë¬¸ì œ',
                clue: `
                    ì¹ íŒì— ë‹¤ìŒê³¼ ê°™ì€ ë°©ì •ì‹ì´ ì“°ì—¬ ìˆìŠµë‹ˆë‹¤.
                    <br>
                    <br>
                    ë§Œì•½ 1 = 5<br>
                    2 = 25<br>
                    3 = 125<br>
                    4 = 625<br>
                    <br>
                    ê·¸ë ‡ë‹¤ë©´ <b>5</b> = ?
                `,
                answer: '1',
                hint: 'ë“±í˜¸ì˜ ì˜ë¯¸ì— ì§‘ì¤‘í•˜ì„¸ìš”.'
            },
            {
                title: 'ë„¤ ë²ˆì§¸ í¼ì¦: ì„¸ ìš©ì˜ìì˜ ì¦ì–¸',
                clue: `
                    íƒì •ë‹˜ì´ ì‚´ì¸ ì‚¬ê±´ í˜„ì¥ì— ë„ì°©í–ˆìŠµë‹ˆë‹¤. í˜„ì¥ì—ëŠ” ì„¸ ëª…ì˜ ìš©ì˜ìì¸ <b>ì§€í›ˆ</b>, <b>ë¯¼ì„œ</b>, ê·¸ë¦¬ê³  <b>íƒœí˜¸</b>ê°€ ìˆìŠµë‹ˆë‹¤.
                    <br>
                    íƒì •ë‹˜ì€ ì´ ì„¸ ì‚¬ëŒ ì¤‘ <b>ì˜¤ì§ í•œ ëª…ë§Œì´</b> ì§„ì‹¤ì„ ë§í•˜ê³  ìˆë‹¤ëŠ” ê²ƒì„ ì•Œê³  ìˆìŠµë‹ˆë‹¤.
                    <br>
                    <br>
                    ì„¸ ì‚¬ëŒì˜ ì¦ì–¸ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.
                    <br>
                    <b>ì§€í›ˆ</b>: "ë¯¼ì„œê°€ ë²”ì¸ì…ë‹ˆë‹¤."
                    <br>
                    <b>ë¯¼ì„œ</b>: "íƒœí˜¸ëŠ” ë²”ì¸ì´ ì•„ë‹™ë‹ˆë‹¤."
                    <br>
                    <b>íƒœí˜¸</b>: "ë¯¼ì„œê°€ ê±°ì§“ë§ì„ í•˜ê³  ìˆìŠµë‹ˆë‹¤."
                    <br>
                    <br>
                    ì´ ì„¸ ì‚¬ëŒ ì¤‘ ëˆ„ê°€ ì§„ì‹¤ì„ ë§í•˜ê³  ìˆë‚˜ìš”? ê·¸ë¦¬ê³  ì§„ì§œ ë²”ì¸ì€ ëˆ„êµ¬ì¸ê°€ìš”?
                    <br>
                    <br>
                    ë‹µë³€ í˜•ì‹: <b>'ì§„ì‹¤ì„ ë§í•˜ëŠ” ì‚¬ëŒ, ë²”ì¸'</b>
                `,
                answer: 'íƒœí˜¸, íƒœí˜¸',
                hint: 'ìš©ì˜ì ì„¸ ëª… ì¤‘ í•œ ëª…ë§Œ ì§„ì‹¤ì„ ë§í•©ë‹ˆë‹¤. ê°ê°ì˜ ì¦ì–¸ì´ ì°¸ì¼ ê²½ìš°ì™€ ê±°ì§“ì¼ ê²½ìš°ë¥¼ ê°€ì •í•˜ì—¬ ëª¨ìˆœì´ ì—†ëŠ” ê²½ìš°ë¥¼ ì°¾ì•„ë³´ì„¸ìš”.'
            },
            {
                title: 'ìµœì¢… í¼ì¦: íƒˆì¶œ!',
                clue: `
                    ì´ì œ ëª¨ë“  ë‹¨ì„œë¥¼ ëª¨ì•˜ìŠµë‹ˆë‹¤. ë§ˆì§€ë§‰ í¼ì¦ì„ í’€ì–´ íƒˆì¶œí•˜ì„¸ìš”.
                    <br>
                    <br>
                    ë‚˜ëŠ” ë§í•˜ë©´ ì‚¬ë¼ì§€ê³ , ë§í•˜ì§€ ì•Šìœ¼ë©´ ìƒê¸´ë‹¤.
                    <br>
                    ë‚˜ëŠ” ëˆ„êµ¬ì¼ê¹Œ?
                    <br>
                    <br>
                    ë‹µë³€ í˜•ì‹: <b>'í•œê¸€'</b>
                `,
                answer: 'ì¹¨ë¬µ',
                hint: 'ì´ê²ƒì€ ì†Œë¦¬ë¡œ ë§Œë“¤ì–´ì§€ì§€ë§Œ, ì†Œë¦¬ë¥¼ ë‚´ë©´ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.'
            }
        ];

        // ë©”ì‹œì§€ë¥¼ í‘œì‹œí•˜ëŠ” í•¨ìˆ˜
        function showMessage(msg, type) {
            messageArea.textContent = msg;
            messageArea.classList.remove('success', 'error');
            messageArea.classList.add(type);
            setTimeout(() => {
                messageArea.textContent = '';
                messageArea.classList.remove('success', 'error');
            }, HINT_DISPLAY_TIME); // íŒíŠ¸ í‘œì‹œ ì‹œê°„ ë³€ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ ìˆ˜ì •
        }

        // í™”ë©´ ì „í™˜ í•¨ìˆ˜
        function showScreen(screen) {
            startScreen.classList.remove('active');
            gameScreen.classList.remove('active');
            endScreen.classList.remove('active');
            screen.classList.add('active');
        }

        // ê²Œì„ ì˜¤ë²„ ìƒíƒœë¥¼ ì²˜ë¦¬í•˜ëŠ” í•¨ìˆ˜
        function gameOver() {
            clearInterval(timerInterval);
            endTitle.textContent = 'ê²Œì„ ì˜¤ë²„';
            endMessage.textContent = 'í•˜íŠ¸ê°€ ëª¨ë‘ ì‚¬ë¼ì¡ŒìŠµë‹ˆë‹¤. ê²Œì„ ì˜¤ë²„!';
            showScreen(endScreen);
        }

        // íƒ€ì´ë¨¸ ì‹œì‘ í•¨ìˆ˜
        function startTimer() {
            timerInterval = setInterval(() => {
                timeElapsed++;
                const minutes = Math.floor(timeElapsed / 60);
                const seconds = timeElapsed % 60;
                timerDisplay.textContent = `${minutes}:${seconds.toString().padStart(2, '0')}`;
            }, 1000);
        }

        // í•˜íŠ¸ ìˆ˜ ì—…ë°ì´íŠ¸ í•¨ìˆ˜
        function updateHearts() {
            heartsDisplay.textContent = 'â¤ï¸'.repeat(hearts);
        }

        // í¼ì¦ ë Œë”ë§ í•¨ìˆ˜
        function renderPuzzle() {
            if (currentPuzzleIndex >= puzzles.length) {
                clearInterval(timerInterval);
                const finalMinutes = Math.floor(timeElapsed / 60);
                const finalSeconds = timeElapsed % 60;
                endTitle.textContent = 'ğŸ‰ íƒˆì¶œ ì„±ê³µ ğŸ‰';
                endMessage.textContent = `ëª¨ë“  í¼ì¦ì„ í’€ê³  ë°©ì„ íƒˆì¶œí–ˆìŠµë‹ˆë‹¤! ì´ ì†Œìš” ì‹œê°„: ${finalMinutes}ë¶„ ${finalSeconds}ì´ˆ`;
                showScreen(endScreen);
                return;
            }
            const puzzle = puzzles[currentPuzzleIndex];
            puzzleTitle.textContent = puzzle.title;
            puzzleClue.innerHTML = puzzle.clue;
            userInput.value = '';
            messageArea.textContent = '';
            showScreen(gameScreen);
        }

        // ì‹œì‘ ë²„íŠ¼ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
        startButton.addEventListener('click', () => {
            currentPuzzleIndex = 0;
            hearts = 10;
            timeElapsed = 0;
            updateHearts();
            startTimer();
            renderPuzzle();
        });

        // ë‹¤ì‹œ ì‹œì‘ ë²„íŠ¼ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
        restartButton.addEventListener('click', () => {
            clearInterval(timerInterval);
            startButton.click();
        });

        // í™•ì¸ ë²„íŠ¼ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
        checkButton.addEventListener('click', () => {
            const currentPuzzle = puzzles[currentPuzzleIndex];
            const userAnswer = userInput.value.trim().toLowerCase();
            const correctAnswer = currentPuzzle.answer.toLowerCase();

            if (userAnswer === correctAnswer) {
                showMessage('ì •ë‹µì…ë‹ˆë‹¤! ë‹¤ìŒ í¼ì¦ë¡œ ì´ë™í•©ë‹ˆë‹¤.', 'success');
                currentPuzzleIndex++;
                setTimeout(() => {
                    renderPuzzle();
                }, 1500);
            } else {
                hearts--;
                updateHearts();
                showMessage('í‹€ë ¸ìŠµë‹ˆë‹¤. í•˜íŠ¸ê°€ í•˜ë‚˜ ì¤„ì–´ë“­ë‹ˆë‹¤.', 'error');
                if (hearts <= 0) {
                    gameOver();
                }
            }
        });
        
        // íŒíŠ¸ ë²„íŠ¼ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
        hintButton.addEventListener('click', () => {
            if (hearts < HINT_COST) {
                showMessage('í•˜íŠ¸ê°€ ë¶€ì¡±í•©ë‹ˆë‹¤. íŒíŠ¸ë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.', 'error');
                return;
            }
            confirmBox.classList.add('active');
        });

        // íŒíŠ¸ í™•ì¸ ë²„íŠ¼ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
        confirmYes.addEventListener('click', () => {
            confirmBox.classList.remove('active');
            hearts -= HINT_COST;
            updateHearts();
            const hint = puzzles[currentPuzzleIndex].hint;
            showMessage(`íŒíŠ¸: ${hint}`, 'info');
            if (hearts <= 0) {
                gameOver();
            }
        });

        // íŒíŠ¸ ì·¨ì†Œ ë²„íŠ¼ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
        confirmNo.addEventListener('click', () => {
            confirmBox.classList.remove('active');
        });

    </script>
</body>
</html>
